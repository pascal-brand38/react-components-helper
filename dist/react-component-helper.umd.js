(function(s,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],t):(s=typeof globalThis<"u"?globalThis:s||self,t(s.ReactComponentHelper={},s.React))})(this,function(s,t){"use strict";const k={"rch-dropdown":"_rch-dropdown_34yn1_1","rch-dropdown__top":"_rch-dropdown__top_34yn1_5","rch-dropdown__top-toclick":"_rch-dropdown__top-toclick_34yn1_10","rch-dropdown__list":"_rch-dropdown__list_34yn1_13","rch-dropdown__list-item":"_rch-dropdown__list-item_34yn1_20"};var w={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},y=t.createContext&&t.createContext(w),i=globalThis&&globalThis.__assign||function(){return i=Object.assign||function(e){for(var o,r=1,n=arguments.length;r<n;r++){o=arguments[r];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(e[l]=o[l])}return e},i.apply(this,arguments)},N=globalThis&&globalThis.__rest||function(e,o){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&o.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(e);l<n.length;l++)o.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(r[n[l]]=e[n[l]]);return r};function v(e){return e&&e.map(function(o,r){return t.createElement(o.tag,i({key:r},o.attr),v(o.child))})}function g(e){return function(o){return t.createElement(O,i({attr:i({},e.attr)},o),v(e.child))}}function O(e){var o=function(r){var n=e.attr,l=e.size,m=e.title,u=N(e,["attr","size","title"]),d=l||r.size||"1em",a;return r.className&&(a=r.className),e.className&&(a=(a?a+" ":"")+e.className),t.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,u,{className:a,style:i(i({color:e.color||r.color},r.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),m&&t.createElement("title",null,m),e.children)};return y!==void 0?t.createElement(y.Consumer,null,function(r){return o(r)}):o(w)}function S(e){return g({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M1014.64 969.04L703.71 656.207c57.952-69.408 92.88-158.704 92.88-256.208 0-220.912-179.088-400-400-400s-400 179.088-400 400 179.088 400 400 400c100.368 0 192.048-37.056 262.288-98.144l310.496 312.448c12.496 12.497 32.769 12.497 45.265 0 12.48-12.496 12.48-32.752 0-45.263zM396.59 736.527c-185.856 0-336.528-150.672-336.528-336.528S210.734 63.471 396.59 63.471c185.856 0 336.528 150.672 336.528 336.528S582.446 736.527 396.59 736.527z"}}]})(e)}function x(e){return g({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]})(e)}function T(e){return g({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z"}}]})(e)}const E=({type:e,initialValue:o,list:r,valueFromItem:n,onChange:l,onSelect:m})=>{const[u,d]=t.useState(!1),a=()=>{d(!u)},[_,f]=t.useState(o),p=({index:c,item:h})=>{d(!1),f(n(h)),m({index:c,item:h})},j=()=>t.createElement(t.Fragment,null,e==="dropdown"&&(u?t.createElement(T,null):t.createElement(x,null)),e==="searchbar"&&t.createElement(S,null));return t.createElement("div",{className:"rch-dropdown"},t.createElement("div",{className:"rch-dropdown__top"},e==="dropdown"&&t.createElement("button",{className:"rch-dropdown__top-toclick",onClick:a}," ",_," "),e==="searchbar"&&t.createElement("input",{className:"rch-dropdown__top-toclick",type:"text",value:_,onChange:c=>{d(!0),f(c.target.value),l(c.target.value)},onKeyUp:({key:c})=>{c==="Enter"&&r&&u&&p({index:0,item:r[0]})}}),t.createElement(j,null)),r&&u?t.createElement("ul",{className:"rch-dropdown__list"},r.map((c,h)=>t.createElement("li",{key:h,className:"rch-dropdown__list-item"},t.createElement("button",{className:"rch-dropdown__list-item",onClick:()=>p({index:h,item:c})},n(c))))):null)};async function C(e,o){const n=await(await fetch("https://geocoding-api.open-meteo.com/v1/search?language=fr&count=100&name="+e)).json();return n&&n.results?o?n.results.filter(l=>o.includes(l.country_code)):n.results:null}function b(e){return e.name+" - "+e.admin2}function z({defaultTownName:e,newCoordsCallback:o,countryFilter:r=null}){const[n,l]=t.useState(null),[m,u]=t.useState(null);function d(f){C(f,r).then(p=>u(p))}t.useEffect(()=>{n||C(e,r).then(f=>l(f[0]))}),t.useEffect(()=>{o&&n&&o(n)},[n]);function a(){return n}function _(){return n?t.createElement(E,{type:"searchbar",initialValue:b(n),list:m,onChange:d,onSelect:({item:f})=>l(f),valueFromItem:b}):null}return{getCoords:a,render:_}}s.RchDropdown=E,s.RchGeoCoords=z,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
